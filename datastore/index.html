<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.103.1" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/automotive-viss2/images/fav.png" type="image/x-icon" />

    <title>VISSv2 Data Storage :: W3C VISSv2 Reference Implementation</title>

    
    <link href="/automotive-viss2/css/nucleus.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/fontawesome-all.min.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/hybrid.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/featherlight.min.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/perfect-scrollbar.min.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/auto-complete.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/atom-one-dark-reasonable.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/theme.css?1698408429" rel="stylesheet">
    <link href="/automotive-viss2/css/hugo-theme.css?1698408429" rel="stylesheet">
    
    <link href="/automotive-viss2/css/theme-blue.css?1698408429" rel="stylesheet">
    
    

    <script src="/automotive-viss2/js/jquery-3.3.1.min.js?1698408429"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/automotive-viss2/datastore/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://w3c.github.io/automotive-viss2/">
  <img src="/automotive-viss2/images/vissv2.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/automotive-viss2/js/lunr.min.js?1698408429"></script>
<script type="text/javascript" src="/automotive-viss2/js/auto-complete.js?1698408429"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/w3c.github.io\/automotive-viss2\/";
    
</script>
<script type="text/javascript" src="/automotive-viss2/js/search.js?1698408429"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/automotive-viss2/build-system/" title="VISSv2 Build System" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/build-system/">
          VISSv2 Build System
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/client/" title="VISSv2 Clients" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/client/">
          VISSv2 Clients
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/datastore/" title="VISSv2 Data Storage" class="dd-item
        
        active
        
        ">
      <a href="/automotive-viss2/datastore/">
          VISSv2 Data Storage
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/feeder/" title="VISSv2 Feeder" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/feeder/">
          VISSv2 Feeder
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/peripheral-components/" title="VISSv2 peripheral components" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/peripheral-components/">
          VISSv2 peripheral components
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/pocs/" title="VISSv2 POCs" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/pocs/">
          VISSv2 POCs
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/automotive-viss2/pocs/poc2/" title="Next POC..." class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/pocs/poc2/">
          Next POC...
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/automotive-viss2/pocs/poc1/" title="Vehicle.Speed subscription example" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/pocs/poc1/">
          Vehicle.Speed subscription example
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/automotive-viss2/server/" title="VISSv2 Server" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/server/">
          VISSv2 Server
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/automotive-viss2/server/access-control-servers/" title="VISSv2 Access Control Servers" class="dd-item
        
        
        
        ">
      <a href="/automotive-viss2/server/access-control-servers/">
          VISSv2 Access Control Servers
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/w3c/automotive-viss2"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/w3c/automotive-viss2/edit/master/tutorial/content/datastore/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/automotive-viss2/'>W3C Vehicle Information Service Specification ver 2 Reference Implementation Tutorial</a> > VISSv2 Data Storage
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#sqlite-state-storage">SQLite state storage</a></li>
    <li><a href="#redis-state-storage">Redis state storage</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              VISSv2 Data Storage
            </h1>
          

        



	<p>Two realizations of data storage are available on the <a href="https://github.com/COVESA/ccs-components">COVESA/CCS-components Github</a>,
one using an SQLite database, and the other a Redis database.</p>
<p>The server implements the APIs to both of these databases, which to use is selected by its command line configuration.</p>
<p>The same support should be available on the other SwC that accesses the data storage,
however the current feeder implementation only implements Redis support, hence it is not merged into the master branch but resides on the feeder branch.</p>
<p>It may be a bit confusing that sometimes this is referred to as &ldquo;data store/storage&rdquo; and sometimes &ldquo;state storage&rdquo;.
The latter name is legacy from a previous COVESA project, the Cloud &amp; Connected Services project, while the former has emerged later in the COVESA architecture group work.
An argument for keeping both could be to say that the state storage refers to a storage that only keeps the latest value of a signal,
while the data store refers to a more general database that can also keep time series of values of a signal.
There are two scenarios where the VISSv2 server operates on time series data, <a href="https://raw.githack.com/w3c/automotive/gh-pages/spec/VISSv2_Core.html#curvelog-filter-operation">curve logging</a>,
and <a href="https://raw.githack.com/w3c/automotive/gh-pages/spec/VISSv2_Core.html#history-filter-operation">historic data</a>,
but in this server implementation these data series is temporarily stored within the server, so a &ldquo;state storage&rdquo; functionality is sufficient for its needs.</p>
<h2 id="sqlite-state-storage">SQLite state storage</h2>
<p>When an SQLite database is used as the state storage it is necessary to prepopulate it with one row for each VSS treeleaf node, having the path name as the key.
To do this there is a <a href="https://github.com/COVESA/ccs-components/tree/master/statestorage/sqlImpl">statestorage_mgr</a> that takes a file containing a list of all the pathnames,
&ldquo;vsspathlist.json&rdquo; as input. This file is generated by the server at startup, taking the paths from the VSS tree that it has access to.</p>
<p>This SQLite DB file then needs to be moved to the WAII/server/visv2server/serviceMgr directory, where it should have the name &ldquo;statestorage.db&rdquo;
(if server configuration is not changed to another name).</p>
<h2 id="redis-state-storage">Redis state storage</h2>
<p>When a Redis databae is used as the state storage then there is no explicit database file to handle as the database is managed in-memory by the Redis daemon.
Instead it is necessary to configure and launch the daemon.
The <a href="https://github.com/COVESA/ccs-components/tree/master/statestorage/redisImpl">redisInit.go</a> file on this link will configure and launch it.
The server uses the same configuration, which needs to be the case also for a feeder to work in concert with the server.
For more information, please check the README on the provided link.</p>
<p>The federclient and serverclient implementations on this link are not needed in this context, they are only meant to make possible some initial testing of using Redis for this,
and as a simple template code base for creating new feeders.</p>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/automotive-viss2/client/" title="VISSv2 Clients"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/automotive-viss2/feeder/" title="VISSv2 Feeder" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/automotive-viss2/js/clipboard.min.js?1698408429"></script>
    <script src="/automotive-viss2/js/perfect-scrollbar.min.js?1698408429"></script>
    <script src="/automotive-viss2/js/perfect-scrollbar.jquery.min.js?1698408429"></script>
    <script src="/automotive-viss2/js/jquery.sticky.js?1698408429"></script>
    <script src="/automotive-viss2/js/featherlight.min.js?1698408429"></script>
    <script src="/automotive-viss2/js/highlight.pack.js?1698408429"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/automotive-viss2/js/modernizr.custom-3.6.0.js?1698408429"></script>
    <script src="/automotive-viss2/js/learn.js?1698408429"></script>
    <script src="/automotive-viss2/js/hugo-learn.js?1698408429"></script>
    
        
            <script src="/automotive-viss2/mermaid/mermaid.js?1698408429"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
